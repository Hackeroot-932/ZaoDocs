---
title: OS Boot
description: Comprehensive guide to OS Boot Process
icon: CirclePower
---

import { Tab, Tabs } from 'fumadocs-ui/components/tabs';
import { Step, Steps } from 'fumadocs-ui/components/steps';
import { Accordion, Accordions } from 'fumadocs-ui/components/accordion';
import { Callout } from 'fumadocs-ui/components/Callout';

<Callout type="info">
  Boot loaders are essential software components that locate necessary resources and initiate all processes required for the operating system to start and execute until control is given to the user.
</Callout>

## 1. Boot Managers

<div className="p-4 border rounded-lg bg-gray-50 dark:bg-gray-900 my-4">
  <p className="mb-3">After the computer's hardware-based boot phase is completed (BIOS, MBR, partitions, PBR, etc.), if the computer has an OS installed, the bootloader phase begins.</p>
  
  <p className="mb-3">A boot manager is a software component (a program) whose function is to locate all necessary resources and start all processes that allow the operating system to initialize and begin execution until control is given to the user.</p>
  
  <p className="mb-3">The boot manager is highly dependent on the installed OS. Each OS typically installs its own boot manager by default, overwriting any previously existing one.</p>
  
  <Accordions>
    <Accordion title="Physical Location of Boot Managers">
      <p>Physically, the boot manager can occupy different positions:</p>
      <ul className="list-disc pl-5 mt-2">
        <li>A small part could occupy the space reserved for the bootstrap in the MBR sector (remember that this space can only hold 446 bytes).</li>
        <li>Another small part could be contained within the PBR bootstrap.</li>
        <li>The boot manager, or its most important part, is also present in the file system in an area specifically reserved for it, usually in the form of a file or a folder with boot files.</li>
      </ul>
      <p className="mt-3">Additionally, the boot manager relies on support files to complete the bootloader phase.</p>
    </Accordion>
  </Accordions>
</div>

## 2. Types of Boot Managers

<Tabs items={["Windows Family", "Linux Family"]}>
  <Tab>
    <div className="p-4 border rounded-lg bg-white dark:bg-gray-800 my-4">
      <h4 className="font-bold mb-2 text-blue-600 dark:text-blue-400">Windows Boot Managers</h4>
      
      <Accordions>
        <Accordion title="Windows 9x">
          <p>The three operating systems in this family started after loading the boot files of the OS that ran underneath Windows: MS-DOS. The boot manager is the set of files that allowed MS-DOS to start:</p>
          <ul className="list-disc pl-5 mt-2">
            <li><strong>IO.SYS</strong></li>
            <li><strong>MSDOS.SYS</strong></li>
            <li><strong>COMMAND.COM</strong></li>
          </ul>
        </Accordion>
        
        <Accordion title="Windows NT">
          <p>This family is divided into two subfamilies:</p>
          
          <div className="p-4 border rounded-lg bg-gray-50 dark:bg-gray-900 my-4">
            <h5 className="font-semibold mb-2">NTLDR (Windows NT 3.0 to Windows XP/2003 Server)</h5>
            <p>Required the presence of the following files:</p>
            <ul className="list-disc pl-5 mt-2">
              <li><strong>ntldr</strong>: The boot manager.</li>
              <li><strong>boot.ini</strong>: A text file containing the list of installed operating systems. NTLDR reads it, displays the list on the screen, and loads the chosen OS.</li>
              <li><strong>NTDETECT.COM</strong>: NTLDR executes this program to obtain information about the installed hardware and then begins loading the most important files.</li>
              <li><strong>NTOSKRNL.EXE and HAL.DLL</strong>: These files allow the kernel phase of the boot to start and contain the OS kernel and the hardware abstraction layer. After the previous phase, NTLDR reads information from the registry, chooses a hardware profile, and loads the basic drivers to continue with the system boot. The kernel takes control of the system, and finally, the WINLOGON.EXE file is used for system startup, user identification, etc., thus beginning the user phase of the boot.</li>
            </ul>
          </div>
          
          <div className="p-4 border rounded-lg bg-gray-50 dark:bg-gray-900 my-4">
            <h5 className="font-semibold mb-2">BOOTMGR (Windows Vista and later)</h5>
            <p>This boot manager is usually found in a hidden partition generated by the installation system of this Windows family by default.</p>
            <ul className="list-disc pl-5 mt-2">
              <li><strong>bootmgr</strong>: The boot manager.</li>
              <li><strong>BCD</strong>: bootmgr reads this file to obtain the boot data, which is no longer in a plain text file but in a database managed with the bcdedit tool or third-party programs like Easy BCD. This database contains the list of installed operating systems.</li>
              <li><strong>winload.exe</strong>: Once the OS is chosen, bootmgr passes control to winload, which, after a hardware detection phase, is what ends up actually loading the OS kernel.</li>
              <li><strong>ntoskrnl.exe and hal.dll</strong>: From this point on, the loading is the same as in the other subfamily, although in this case, it's winload.exe that directs the loading of the OS instead of ntldr.</li>
            </ul>
          </div>
        </Accordion>
      </Accordions>
    </div>
  </Tab>
  <Tab>
    <div className="p-4 border rounded-lg bg-white dark:bg-gray-800 my-4">
      <h4 className="font-bold mb-2 text-green-600 dark:text-green-400">Linux Boot Managers</h4>
      
      <Accordions>
        <Accordion title="Historical Boot Managers">
          <ul className="list-disc pl-5">
            <li><strong>LILO</strong>: Used in Linux distributions from the 1990s.</li>
            <li><strong>SYSLINUX</strong>: A boot manager that is used as an alternative to the well-known GRUB.</li>
          </ul>
        </Accordion>
        
        <Accordion title="GRUB (Legacy)">
          <p>In GRUB, now also called GRUB Legacy to differentiate it from GRUB 2:</p>
          <ul className="list-disc pl-5 mt-2">
            <li>The boot begins with the main file, called grub.</li>
            <li>The boot manager reads the list of operating systems from a file called menu.lst.</li>
            <li>Once the OS is chosen, the kernel is loaded, followed by the rest of the OS.</li>
          </ul>
          
          <p className="mt-3">GRUB divides the boot into two phases:</p>
          <ul className="list-disc pl-5 mt-2">
            <li><strong>Phase 1</strong>: Located in the MBR, where it can jump to load Phase 2 or load a so-called "Phase 1.5" that would be located in the hard disk sectors adjacent to the MBR.</li>
            <li><strong>Phase 2</strong>: Can be located in any sector of the hard disk and is the one that reads and displays the boot menu.</li>
          </ul>
          
          <p className="mt-3">GRUB Legacy does not support booting from GPT disks or UEFI-type boots, which is why it was improved through the creation of GRUB 2.</p>
        </Accordion>
        
        <Accordion title="GRUB 2">
          <p>GRUB 2 allows:</p>
          <ul className="list-disc pl-5 mt-2">
            <li><strong>High customization</strong> of boot menus: text, colors, background image, loading parameter modification, etc.</li>
            <li>Booting operating systems from different families, including Windows, as it supports various commonly used file systems: ext2/ext3/ext4, ReiserFS, btrFS, FAT12/FAT16/FAT32/exFAT, NTFS, etc.</li>
            <li>Creating bootable USB drives with different Live OS.</li>
            <li>Directly booting ISOs, with the limitation of requiring the ISO to be contiguous (in consecutive disk clusters).</li>
          </ul>
          
          <p className="mt-3">In GRUB 2, the menu.lst file is replaced by another called grub.cfg, which has new syntax and functionalities, greater complexity, etc., but this file should not be edited manually. To modify the boot menu, you must edit the /etc/default/grub file and use the update-grub command to update the grub.cfg file with the new preferences. Therefore, changing the boot in GRUB 2 is more difficult.</p>
        </Accordion>
      </Accordions>
    </div>
  </Tab>
</Tabs>

## 3. Dual Boot System Installation: Windows

<div className="p-4 border rounded-lg bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 my-6 shadow-md">
  <p className="text-center text-lg font-semibold mb-4">A dual boot system allows booting two (initially different) operating systems installed on the hard drive, depending on the user's needs.</p>
  
  <p className="mb-3">Similarly, a multiboot system allows booting multiple operating systems. Each OS is installed on at least one partition, so a multiboot system with 5 OSes will need at least 5 partitions.</p>
  
  <Callout type="warning">
    It's very important to plan in advance what sizes and in what order these partitions should be placed, as the performance of magnetic hard drives deteriorates as the tracks get closer to the center.
  </Callout>
  
  <Accordions>
    <Accordion title="Installation Order">
      <p>To build a dual boot system, it's necessary to follow a specific order to avoid problems. It's possible to ignore this recommendation, install the OSes in a different order, and create a dual boot startup later, but this might require advanced knowledge and complicate our work, so it's safer to follow this recommendation in the installation order.</p>
      
      <div className="p-4 border rounded-lg bg-white dark:bg-gray-800 my-4">
        <h5 className="font-semibold mb-2 text-blue-600 dark:text-blue-400">Windows Universe Installation Order</h5>
        <p>In the Windows universe, a very clear order is established: First, install the older operating systems, then the more modern ones. The reason is clear: When installing a modern operating system, it detects installations of older systems, and the installation process itself generates a dual boot startup compatible with both the modern OS and the older OS.</p>
        
        <div className="flex justify-center my-4">
          <img src="/windows-dual-boot.png" alt="Windows Dual Boot" className="rounded-lg shadow-md" />
        </div>
        
        <p className="mt-3">However, this has limitations, as the systems of the Windows NT family, as we've seen, use a very different boot system from those of the Windows 9x family, which first booted MS-DOS. Therefore, in principle, you couldn't create a dual boot startup between Windows 98 and Windows XP, for example (although there are tutorials with tricks).</p>
      </div>
      
      <div className="p-4 border rounded-lg bg-white dark:bg-gray-800 my-4">
        <h5 className="font-semibold mb-2 text-green-600 dark:text-green-400">Partition Management</h5>
        <p>Another recommendation is that each system manages its own partitions. It's not advisable to use the installer of one OS to create partitions for a different OS. For example, if we install Windows XP on FAT32 and Windows 7 on NTFS, we use each installer to create its own partition and format it, but we don't create a partitioning scheme from the beginning with the Windows XP installer.</p>
      </div>
    </Accordion>
    
    <Accordion title="Boot Menu Creation">
      <p>Each new system that is installed will detect the old system that was installed and will create a boot menu to allow the startup of previous systems. To do this, it overwrites the disk's MBR to implement its own bootstrap and also overwrites the PBR of the active partition to implement its own boot manager.</p>
      
      <div className="grid grid-cols-1 md:grid-cols-2 gap-4 my-4">
        <div className="p-4 border rounded-lg bg-white dark:bg-gray-800">
          <h5 className="font-semibold mb-2 text-blue-600 dark:text-blue-400">Examples</h5>
          <ul className="list-disc pl-5">
            <li>If we install Windows XP and then install Windows 7, the boot will be managed by the Windows 7 boot manager.</li>
            <li>If we install Windows 7 and then install Windows 10, the boot will be managed by the Windows 10 boot manager.</li>
          </ul>
          <div className="flex justify-center my-4">
            <img src="/windows10-dual-boot.png" alt="Windows 10 Dual Boot" className="rounded-lg shadow-md" />
          </div>
        </div>
        <div className="p-4 border rounded-lg bg-white dark:bg-gray-800">
          <h5 className="font-semibold mb-2 text-purple-600 dark:text-purple-400">Boot Management</h5>
          <p>Each newer version of Windows takes over boot management and creates a menu for the previously installed versions. This process happens automatically during installation as the newer system detects the existing installations.</p>
          <div className="flex justify-center my-4">
            <img src="/windows7-boot-menu.png" alt="Windows 7 Boot Menu" className="rounded-lg shadow-md" />
          </div>
        </div>
      </div>
    </Accordion>
  </Accordions>
</div>

## 4. Dual Boot System Installation: Linux and Hybrid Systems

<Callout type="info">
  When we enter the Linux sphere, boot managers are more homogenized, and there are usually no conflicts between the OSes in a dual boot. However, in the case of a hybrid boot, it is advisable to follow the recommendations.
</Callout>

<Tabs items={["Windows + Linux", "Boot Manager Features", "External Boot Managers"]}>
  <Tab>
    <div className="p-4 border rounded-lg bg-white dark:bg-gray-800 my-4">
      <h4 className="font-bold mb-2 text-blue-600 dark:text-blue-400">Windows and Linux Dual Boot</h4>
      
      <p>To ensure that Windows and Linux can boot with a common boot manager, it was always mandatory to install Windows first and then the desired Linux distribution, as the Windows boot manager could not boot a Linux family OS, but the Linux manager could boot a Windows family OS.</p>
      
      <p className="mt-3">Today, this is not strictly the case, as some third-party software can manipulate the Windows 10 boot to boot Linux, but again, it's advisable to follow the recommendations to avoid problems.</p>
      
      <div className="grid grid-cols-1 md:grid-cols-2 gap-4 my-4">
        <div className="p-4 border rounded-lg bg-gray-50 dark:bg-gray-900">
          <h5 className="font-semibold mb-2 text-green-600 dark:text-green-400">GRUB Can Boot Windows</h5>
          <div className="flex justify-center my-4">
            <img src="/grub-boots-windows.png" alt="GRUB Booting Windows" className="rounded-lg shadow-md" />
          </div>
        </div>
        <div className="p-4 border rounded-lg bg-gray-50 dark:bg-gray-900">
          <h5 className="font-semibold mb-2 text-red-600 dark:text-red-400">Windows Cannot Boot Linux</h5>
          <p>Without manipulating the boot system, Windows 10 cannot natively boot Linux operating systems.</p>
          <div className="flex justify-center my-4">
            <img src="/windows-cannot-boot-linux.png" alt="Windows Cannot Boot Linux" className="rounded-lg shadow-md" />
          </div>
        </div>
      </div>
      
      <p className="mt-3">As a curiosity, we have pointed out several times that in the MBR partitioning scheme, only primary partitions have a boot sector, so in principle, OS cannot be installed on logical units. With GRUB, it is possible to do so.</p>
    </div>
  </Tab>
  <Tab>
    <div className="p-4 border rounded-lg bg-white dark:bg-gray-800 my-4">
      <h4 className="font-bold mb-2 text-green-600 dark:text-green-400">Key Features of Linux Boot Managers</h4>
      
      <p>Linux boot managers like GRUB offer several advantages when creating dual boot systems:</p>
      
      <ul className="list-disc pl-5 mt-2">
        <li>Support for multiple file systems, including those used by Windows</li>
        <li>Ability to boot from logical partitions, not just primary partitions</li>
        <li>Highly customizable boot menus</li>
        <li>Support for booting ISO files directly</li>
        <li>Better handling of complex multiboot scenarios</li>
      </ul>
      
      <div className="flex justify-center my-4">
        <img src="/grub-menu.png" alt="GRUB Menu" className="rounded-lg shadow-md" />
      </div>
      
      <p className="mt-3">When creating a dual boot system with Windows and Linux, the general recommendation is to:</p>
      
      <Steps>
        <Step>
          <h4>Install Windows First</h4>
          <p>Begin by installing Windows on its own partition</p>
        </Step>
        <Step>
          <h4>Create Space for Linux</h4>
          <p>Use Windows Disk Management or the Linux installer to create/resize partitions</p>
        </Step>
        <Step>
          <h4>Install Linux</h4>
          <p>Install the Linux distribution, which will detect Windows and configure GRUB accordingly</p>
        </Step>
        <Step>
          <h4>Verify the Boot Menu</h4>
          <p>Restart the computer and ensure both operating systems appear in the GRUB menu</p>
        </Step>
      </Steps>
    </div>
  </Tab>
  <Tab>
    <div className="p-4 border rounded-lg bg-white dark:bg-gray-800 my-4">
      <h4 className="font-bold mb-2 text-purple-600 dark:text-purple-400">External Boot Managers</h4>
      
      <p>Finally, there are external boot managers that facilitate dual boot and multiboot startups, such as the old Boot Magic and BootIt. These external managers allow booting OSes by simulating that they are installed individually.</p>
      
      <p className="mt-3">This way, the systems individually don't have to manage the boot, and the specific program does it.</p>
      
      <div className="p-4 border rounded-lg bg-gray-50 dark:bg-gray-900 my-4">
        <h5 className="font-semibold mb-2">Advantages of External Boot Managers</h5>
        <ul className="list-disc pl-5">
          <li>More flexibility in managing multiple operating systems</li>
          <li>Less likelihood of one OS's updates breaking the boot configuration</li>
          <li>Additional features like boot password protection</li>
          <li>Greater compatibility with diverse operating systems</li>
          <li>Easier recovery in case of boot problems</li>
        </ul>
      </div>
      
      <div className="flex justify-center my-4">
        <img src="/external-boot-manager.png" alt="External Boot Manager" className="rounded-lg shadow-md" />
      </div>
    </div>
  </Tab>
</Tabs>